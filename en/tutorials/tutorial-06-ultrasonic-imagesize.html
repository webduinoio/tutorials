<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta http-equiv="pragma" content="no-cache"> <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"> <meta name="author" content="webduino.io"> <meta name="copyright" content="webduino.io"> <meta itemprop="name" content="webduino.io"> <link rel="icon" href="../../img/layout/favicon.ico" type="image/x-icon"> <title>Project Example 6: Manipulating image size with an Ultrasonic sensor :::: Webduino = Web × Arduino</title> <meta name="description" content="By sending a distance value from an sensor and mapping it to the width of an image on a webpage, we can easily control the size of an image with an Ultrasonic sensor."> <meta itemprop="description" content="By sending a distance value from an sensor and mapping it to the width of an image on a webpage, we can easily control the size of an image with an Ultrasonic sensor."> <meta property="og:description" content="By sending a distance value from an sensor and mapping it to the width of an image on a webpage, we can easily control the size of an image with an Ultrasonic sensor."> <meta property="og:title" content="Project Example 6: Manipulating image size with an Ultrasonic sensor"> <meta property="og:url" content="https://webduino.io/tutorials/tutorial-06-ultrasonic-imagesize.html"> <meta property="og:image" content="https://webduino.io/img/tutorials/tutorial-06-01s.jpg"> <meta itemprop="image" content="https://webduino.io/img/tutorials/tutorial-06-01s.jpg"> <script src="../../js/lib/jquery.min.js"></script> <script src="../../js/lib/jquery.lazyload.min.js"></script> <script src="../../js/lib/run_prettify.js"></script> <script src="../../js/layout.js"></script> <script src="../../js/tutorials-en.js"></script> <script src="../../js/lib/disqus.js"></script> <link rel="stylesheet" href="../../style/css/lib/tomorrow.css"> <link rel="stylesheet" href="../../style/css/layout.css"> <link rel="stylesheet" href="../../style/css/sub-header.css"> <link rel="stylesheet" href="../../style/css/tutorials-content.css"> <link rel="stylesheet" href="../../style/css/tutorials-en-content.css"> <link rel="stylesheet" href="../../style/css/lib/font-awesome.css"> <style>
.tutorials-content p{
	word-wrap:normal;
	word-break:normal;
}
</style> </head> <body> <header class="path-0"> <a class="logo" href="index.html" data-name="layout-header-logo"></a> <div class="mobile-menu"></div> <div class="menu"> <a href="index.html" class="index" data-name="layout-mobile-menu">Home</a> <a href="tutorials.html" class="tutorials" data-name="layout-mobile-menu">Tutorials</a> <a href="buy.html" class="buy" data-name="layout-mobile-men">Buy</a> <a href="about.html" class="about" data-name="layout-mobile-men">About us</a> <a href="../index.html" class="english" data-name="layout-mobile-men">中文</a> </div> </header> <header class="path-1"> <a class="logo" href="../index.html"></a> <div class="mobile-menu"></div> <div class="menu"> <a href="../index.html" class="index" data-name="layout-menu">Home</a> <a href="../tutorials.html" class="tutorials" data-name="layout-menu">Tutorials</a> <a href="../buy.html" class="buy" data-name="layout-menu">Buy</a> <a href="../about.html" class="about" data-name="layout-menu">About us</a> <a href="../../index.html" class="english" data-name="layout-mobile-men">中文</a> </div> </header> <div class="tutorials-content"> <div class="banner"> </div> <h1 id="project-example-6-manipulating-image-size-with-an-ultrasonic-sensor">Project Example 6: Manipulating image size with an Ultrasonic sensor</h1> <p>In our <a href="tutorial-05-ultrasonic.html">last tutorial</a> ,we learned how an Ultrasonic sensor works, now we will be able to apply that knowledge in this tutorial. By sending a distance value from an sensor and mapping it to the width of an image on a webpage, we can easily control the size of an image with an Ultrasonic sensor.</p>  <h2 id="video-tutorial">Video Tutorial</h2>  <p>Watch the video tutorial here:</p> <iframe class="youtube" src="https://www.youtube.com/embed/NXJ3xmqHm8o" frameborder="0" allowfullscreen=""></iframe> <h2 id="wiring-and-practice">Wiring and Practice</h2> <p>Just as we did in the last tutorial, connect the VCC pin on your board to 3.3v, Trig to 11, Echo to 10, and GND to GND. You can connect the Ultrasonic sensor directly to the Webduino board or use a breadboard to connect them with jumper wires.</p> <p>Webduino Mark 1 Circuit diagram:</p> <p><img src="../../img/tutorials/tutorial-06-02.jpg" alt="教學範例 6：超音波傳感器改變圖片大小"></p> <p>Webduino Fly Circuit diagram:</p> <p><img src="../../img/tutorials/tutorial-06-02-fly.jpg" alt="教學範例 6：超音波傳感器改變圖片大小"></p> <p>Reference image:</p> <p><img src="../../img/tutorials/tutorial-06-03.jpg" alt="教學範例 6：超音波傳感器改變圖片大小"></p>  <h2 id="instructions-for-using-the-webduino-blockly">Instructions for using the Webduino Blockly</h2> <p>Open the <a href="https://blockly.webduino.io/index.html?lang=en">Webduino Blockly editor</a> and click on the &quot;Web Demo Area&quot; button. Click on &quot;control image&quot; from the drop down menu, and you will see an image. We will control the image&#39;s size using the values that are measured by the Ultrasonic sensor.</p> <p><img src="../../img/tutorials/en/tutorial-06-04.jpg" alt="教學範例 6：超音波傳感器改變圖片大小"></p> <p>Place a &quot;Board&quot; block into the workspace, select your board&#39;s name. Place a &quot;Set Ultrasonic&quot; block in the stack, set name to ultrasonic, set Trig to 11, and Echo to 10. Then place a &quot;Get distance&quot; block under that and set it to sense every 500 ms (milliseconds). Place an &quot;Image Rotate&quot; block from &quot;Web Demo&quot; menu, which will control the angle of the image using the distance measured by the sensor. Make sure to replace the original &quot;0 value&quot; block with a &quot;Distance&quot; measure block.</p> <p><img src="../../img/tutorials/en/tutorial-06-05.jpg" alt="教學範例 6：超音波傳感器改變圖片大小"></p> <p>You can also control the width of the image with the distance measured from the Ultrasonic sensor by adding an &quot;Image width / height&quot; block into the &quot;Ultrasonic distance&quot; block. Replace the two number value block with &quot;Ultrasonic&#39;s Distance&quot; blocks.</p> <p><img src="../../img/tutorials/en/tutorial-06-06.jpg" alt="教學範例 6：超音波傳感器改變圖片大小"></p> <p>If you don&#39;t want a 1:1 ratio, create your own set of rules to map a relationship between the distance measured and the image. To make this change, add a function block found in the &quot;Math&quot; menu, adding an &quot;Ultrasonic&#39;s distance&quot; block and multiplying it by a certain number.</p> <p><img src="../../img/tutorials/en/tutorial-06-07.jpg" alt="教學範例 6：超音波傳感器改變圖片大小"></p> <p>After you&#39;re done with the previous steps, make sure the board is online by clicking &quot;<a href="https://webduino.io/device.html">Check Device Status</a>&quot;. Then click on the red &quot;Run Blocks&quot; button, wave your hands in front of the Ultrasonic sensor and you&#39;ll see the image to start to rotate or change in size! ( Solution：<a href="https://blockly.webduino.io/?lang=en#-KYIEc-U7nGdDGduUMgj">https://blockly.webduino.io/?lang=en#-KYIEc-U7nGdDGduUMgj</a> )</p> <h2 id="code-explanation-check-webduino-bin-check-device-status-">Code Explanation (<a href="http://bin.webduino.io/zuxof/edit?html,css,js,output">Check Webduino Bin</a>, <a href="https://webduino.io/device.html">Check Device Status</a>)</h2> <p>Include <code>webduino-all.min.js</code> in the header of your html files in order to support all of the Webduino&#39;s components. If the codes are generated by Webduino Blockly, you also have to include <code>webduino-blockly.js</code> in your files.</p> <pre><code>&lt;script src=&quot;https://webduino.io/components/webduino-js/dist/webduino-all.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://webduinoio.github.io/webduino-blockly/webduino-blockly.js&quot;&gt;&lt;/script&gt;
</code></pre><p>We have an image inside a div of the HTML file, both the image and the div have ids, allowing us to control with CSS or JavaScript.</p> <pre><code>&lt;div id=&quot;demo-area-03-container&quot;&gt;
  &lt;img src=&quot;https://blockly.webduino.io/media/webduino-logo.jpg&quot; id=&quot;demo-area-03-image&quot;&gt;
&lt;/div&gt;
</code></pre><p>With CSS we define the width and length with the div. Do take note when we set <code>position: relative;</code> and the image inside is set to <code>position: absolute</code>, we can use <code>top</code> and <code>left</code> to set the image position from the location of the div. We also use <code>transform-origin</code> to define the center of the image, and we use <code>transition</code> to set how the image changes, in this case, we&#39;ve set it to 0.3 seconds.</p> <pre><code>#demo-area-03-container {
  position: relative;
  width: 150px;
  height: 150px;
}

#demo-area-03-image {
  position: absolute;
  top: 0;
  left: 0;
  width: 150px;
  height: 150px;
  transition: .3s;
  -webkit-transition: .3s;
  -moz-transition: .3s;
  transform-origin: 75px 75px;
  -webkit-transform-origin: 75px 75px;
  -moz-transform-origin: 75px 75px;
}
</code></pre><p>As for JavaScript, all we&#39;ve done is take the value from <code>ping</code> (measured in cm) and maped it to the size of the image, just simple calculations.</p> <pre><code>var ultrasonic;

boardReady(&#39;&#39;, function (board) {
  board.samplingInterval = 20;
  ultrasonic = getUltrasonic(board, 11, 10);
  ultrasonic.ping(function(cm){
    console.log(ultrasonic.distance);
    var imageWidth = ultrasonic.distance;
    var imageHeight = (ultrasonic.distance * 1.5);
    document.getElementById(&quot;demo-area-03-image&quot;).style.width = imageWidth+&quot;px&quot;;
    document.getElementById(&quot;demo-area-03-image&quot;).style.height = imageHeight+&quot;px&quot;;
  }, 500);
});
</code></pre><p>Now you&#39;ve learned how to use an Ultrasonic sensor to sense distances and change the size or angle of an image from that data!<br>Webduino Bin: <a href="http://bin.webduino.io/xoco/edit?html,css,js,output">http://bin.webduino.io/xoco/edit?html,css,js,output</a><br>Stack setup: <a href="https://blockly.webduino.io/?lang=en#-KYIBv4DWz3PaefLCJU4">https://blockly.webduino.io/?lang=en#-KYIBv4DWz3PaefLCJU4</a></p>   <a class="arrow arrow-r pre-next-button" data-name="pre-next-arrow"></a> <a class="arrow arrow-l pre-next-button" data-name="pre-next-arrow"></a> <div class="pre-next"> <div> <div class="pre"></div> <div class="next"></div> </div> </div> <div class="note-chicken"></div> <div class="others"> <i class="fa fa-times note-close-btn"></i> <h5>More information : </h5> <div class="others-link otehrs-read"> 1. Tutorials : <a href="https://webduino.io/en/tutorials.html" data-name="noteLink">https://webduino.io/tutorials.html</a> <br> 2. Blockly : <a href="https://goo.gl/Y8sRkl" data-name="noteLink">https://goo.gl/Y8sRkl</a> <br> 3. Products : <a href="https://webduino.io/buy.html" target="_blank" data-name="noteLink">https://webduino.io/buy.html <i class="fa fa-share-square-o"></i></a> <br> 4. Store : <a href="http://goo.gl/0Dj9ip" target="_blank" data-name="noteLink">http://goo.gl/0Dj9ip <i class="fa fa-share-square-o"></i></a> </div> </div> </div> <div class="disqus"> <div id="disqus_thread"></div> </div> <footer class="en"> <div class="logo"> <a href="index.html" data-name="layout-footer-logo"><i></i></a> <a href="../index.html" data-name="layout-footer-logo"><i></i></a> </div> <h4>Copyright 2017 | All Rights Reserved. Powered by Webduino</h4> <h4 style="padding-bottom: 20px;">2F-6, No.12, Fuxing 4th Rd., Qianzhen Dist., Kaohsiung City 806, Taiwan (R.O.C.) / 886-7-3388511</h4> </footer> <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-62202920-1', 'auto');
  ga('send', 'pageview');

</script> </body> </html>