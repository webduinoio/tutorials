<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta http-equiv="pragma" content="no-cache"> <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"> <meta name="author" content="webduino.io"> <meta name="copyright" content="webduino.io"> <meta itemprop="name" content="webduino.io"> <link rel="icon" href="../../img/layout/favicon.ico" type="image/x-icon"> <title>Project Example 35: Controlling YouTube volume with a Potentiometer :::: Webduino = Web × Arduino</title> <meta name="description" content="In our last tutorial “Project Example 34: Changing image position with a Potentiometer” we showed you how to use a Potentiometer to move an image on your screen. In this tutorial, we will learn how to use a Potentiometer to control the volume of a YouTube video, in the same way that you would use the volume control on a physical stereo speaker."> <meta itemprop="description" content="In our last tutorial “Project Example 34: Changing image position with a Potentiometer” we showed you how to use a Potentiometer to move an image on your screen. In this tutorial, we will learn how to use a Potentiometer to control the volume of a YouTube video, in the same way that you would use the volume control on a physical stereo speaker."> <meta property="og:description" content="In our last tutorial “Project Example 34: Changing image position with a Potentiometer” we showed you how to use a Potentiometer to move an image on your screen. In this tutorial, we will learn how to use a Potentiometer to control the volume of a YouTube video, in the same way that you would use the volume control on a physical stereo speaker."> <meta property="og:title" content="Project Example 35: Controlling YouTube volume with a Potentiometer"> <meta property="og:url" content="https://webduino.io/tutorials/tutorial-35-vr-youtube.html"> <meta property="og:image" content="https://webduino.io/img/tutorials/tutorial-35-01s.jpg"> <meta itemprop="image" content="https://webduino.io/img/tutorials/tutorial-35-01s.jpg"> <script src="../../js/lib/jquery.min.js"></script> <script src="../../js/lib/jquery.lazyload.min.js"></script> <script src="../../js/lib/run_prettify.js"></script> <script src="../../js/layout.js"></script> <script src="../../js/tutorials-en.js"></script> <script src="../../js/lib/disqus.js"></script> <link rel="stylesheet" href="../../style/css/lib/tomorrow.css"> <link rel="stylesheet" href="../../style/css/layout.css"> <link rel="stylesheet" href="../../style/css/sub-header.css"> <link rel="stylesheet" href="../../style/css/tutorials-content.css"> <link rel="stylesheet" href="../../style/css/tutorials-en-content.css"> <link rel="stylesheet" href="../../style/css/lib/font-awesome.css"> <style>
.tutorials-content p{
	word-wrap:normal;
	word-break:normal;
}
</style> </head> <body> <header class="path-0"> <a class="logo" href="index.html" data-name="layout-header-logo"></a> <div class="mobile-menu"></div> <div class="menu"> <a href="index.html" class="index" data-name="layout-mobile-menu">Home</a> <a href="tutorials.html" class="tutorials" data-name="layout-mobile-menu">Tutorials</a> <a href="buy.html" class="buy" data-name="layout-mobile-men">Buy</a> <a href="about.html" class="about" data-name="layout-mobile-men">About us</a> <a href="../index.html" class="english" data-name="layout-mobile-men">中文</a> </div> </header> <header class="path-1"> <a class="logo" href="../index.html"></a> <div class="mobile-menu"></div> <div class="menu"> <a href="../index.html" class="index" data-name="layout-menu">Home</a> <a href="../tutorials.html" class="tutorials" data-name="layout-menu">Tutorials</a> <a href="../buy.html" class="buy" data-name="layout-menu">Buy</a> <a href="../about.html" class="about" data-name="layout-menu">About us</a> <a href="../../index.html" class="english" data-name="layout-mobile-men">中文</a> </div> </header> <div class="tutorials-content"> <div class="banner"> </div> <h1 id="project-example-35-controlling-youtube-volume-with-a-potentiometer">Project Example 35: Controlling YouTube volume with a Potentiometer</h1> <p>In our last tutorial &quot;<a href="tutorial-34-vr-image.html">Project Example 34: Changing image position with a Potentiometer</a>&quot; we showed you how to use a Potentiometer to move an image on your screen. In this tutorial, we will learn how to use a Potentiometer to control the volume of a YouTube video, in the same way that you would use the volume control on a physical stereo speaker.</p>  <h2 id="video-tutorial">Video tutorial</h2> <p>Check the video tutorial here:</p> <iframe class="youtube" src="https://www.youtube.com/embed/hA0rx5uK_qw" frameborder="0" allowfullscreen=""></iframe> <h2 id="wiring-and-practice">Wiring and Practice</h2> <p>A Potentiometer has three pins. The left pin should be connected to 3.3V and the right pin connected to GND. Remember to use a resistor in your GND connection to prevent a short circuit, which happens when you have very low resistance. For more information on this google Ohm&#39;s law. The middle pin is an analog signal pin，which should be connected to A3. If your 3.3V and GND are connected in reverse, the values produced will also be reversed when you turn the knob on the Potentiometer.</p> <p>Webduino Mark 1 Circuit diagram:</p> <p><img src="../../img/tutorials/tutorial-34-02.jpg"></p> <p>Webduino Fly Circuit diagram:</p> <p><img src="../../img/tutorials/tutorial-34-02-fly.jpg"></p> <p>Reference image:</p> <p><img src="../../img/tutorials/tutorial-34-03.jpg"></p> <p><img src="../../img/tutorials/tutorial-34-04.jpg"></p>  <h2 id="instructions-for-using-the-webduino-blockly">Instructions for using the Webduino Blockly</h2> <p>Begin by opening the <a href="https://blockly.webduino.io/?lang=en">Webduino Blockly</a>, and placing a &quot;Board&quot; block inside the workspace. Select your Webduino board&#39;s name, place a &quot;Photocell / Potentiometer&quot; block in the stack, and set the pin to A3.</p> <p><img src="../../img/tutorials/en/tutorial-35-02.jpg"></p> <p>Place a &quot;YouTube&quot; block (located in the &quot;Web Demo&quot; menu) and a &quot;detects / do&quot; block (under the &quot;photocell / potentiometer&quot; menu) into the stack. Then fill in the YouTube ID number for the video you want to control.</p> <p><img src="../../img/tutorials/en/tutorial-35-03.jpg"></p> <p>To find the YouTube ID, go to the video page you want to use. Everything after <code>v=</code> of the web address is the ID.</p> <p><img src="../../img/tutorials/en/tutorial-35-04.jpg"></p> <p>To detect the input of the sensor, we must add a &quot;Set item to&quot; block from under the &quot;Variable&quot; menu. (Since we will use this multiple times, it will reduce the work needed to be done by setting it once) Because the Potentiometer has a floating point number of 0 to 1, and YouTube has the volume integers of 0 to 100, we will need to round the numbers using the &quot;round to decimal point&quot; and &quot;scale conversion&quot; blocks found under the &quot;Advanced&quot; / &quot;Math Conversion&quot; menu.</p> <p>At the very bottom of the stack add a &quot;Console&quot; block from under the &quot;Advanced&quot; menu along with a &quot;Youtube volume&quot; block. Connect &quot;Variable&quot; &quot;Item&quot; blocks to each of these and set them to &quot;a&quot;.</p> <p>Then we can use the console in Chrome&#39;s developer tools to receive values. To do this just right click on the webpage in Chrome and choose &quot;Inspect&quot;, other browsers have similar tools.</p> <p><img src="../../img/tutorials/en/tutorial-35-05.jpg"></p> <p>Confirm the board is online, by clicking <a href="https://webduino.io/device.html">Check Device Status</a>. Open your Youtube video and click on the top right red button &quot;Run Blocks&quot; to execute the stack. Then try turning the Potentiometer knob and you&#39;ll see the volume change.</p> <p>Solution: <a href="http://blockly.webduino.io/?lang=en#-KYM6mGIrb1A4NStOp4R">http://blockly.webduino.io/?lang=en#-KYM6mGIrb1A4NStOp4R</a> </p> <p>If you&#39;d like the volume to change in reverse (originally turning the volume up by turning the Potentiometer clock-wise but you’d like to turn the volume up by turning the Potentiometer counterclockwise), all you have to do is change the values in the &quot;Scale conversion&quot; block, change 0 to 1 and 1 to 0. Or if you prefer to play with hardware, you could change the 3.3V pin to GND and GND to 3.3V, the values should change as well.</p> <p><img src="../../img/tutorials/en/tutorial-35-06.jpg"></p> <p>##Code Explanation (<a href="https://bin.webduino.io/qazu/edit?html,css,js,output">Check Webduino Bin</a>, <a href="https://webduino.io/device.html">Check Device Status</a>)</p> <p>Include <code>webduino-all.min.js</code> in the header of your html files in order to support all of the Webduino&#39;s components. If the codes are generated by Webduino Blockly, you also have to include <code>webduino-blockly.js</code> in your files.</p> <pre><code>&lt;script src=&quot;https://webduino.io/components/webduino-js/dist/webduino-all.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://webduinoio.github.io/webduino-blockly/webduino-blockly.js&quot;&gt;&lt;/script&gt;
</code></pre><p>We will place an YouTube video inside a div in the HTML file.</p> <pre><code>&lt;div id=&quot;player&quot;&gt;&lt;/div&gt;
</code></pre><p>The image changes because we set the position for our image to &quot;absolute&quot; in our CSS file. </p> <pre><code>#demo-area-03-container {
  position: relative;
  width: 150px;
  height: 150px;
}

#demo-area-03-image {
  position: absolute;
  top: 0;
  left: 0;
  width: 150px;
  height: 150px;
  transition: .3s;
  -webkit-transition: .3s;
  -moz-transition: .3s;
  transform-origin: 75px 75px;
  -webkit-transform-origin: 75px 75px;
  -moz-transform-origin: 75px 75px;
}
</code></pre><p>The main program starts by importing a YouTube module, then using the <code>on</code> from the Potentiometer to receive signals. The value will be returned to val, and we will use round and &quot;Scale conversion&quot; to acquire the correct values. When we send the values to YouTube volume, to prevent an error of setting the volume higher than 100, we have a function to limit the volume to 100. </p> <pre><code>var photocell;
var youtube;
var a;

boardReady(&#39;&#39;, async function (board) {
  board.systemReset();
  board.samplingInterval = 250;
  photocell = getPhotocell(board, 3);
  await new Promise(function (resolve) {
    var tag = document.createElement(&quot;script&quot;);
    tag.src = &quot;https://www.youtube.com/iframe_api&quot;;
    var scptTag = document.getElementsByTagName(&quot;script&quot;)[0];
    scptTag.parentNode.insertBefore(tag, scptTag);
    window.onYouTubeIframeAPIReady = function () {
      youtube = new YT.Player(&quot;player&quot;, {
        height: &quot;240&quot;,
        width: &quot;96%&quot;,
        videoId: &quot;h18K_JnUi4Q&quot;,
        playerVars: {
          autoplay: 1,
          controls: 1
        },
        events: {
          onReady: function (evt) {
            resolve();
          }
        }
      });
    };
  });
  photocell.on(async function(val){
    photocell.detectedVal = val;
    a = Math.round(((photocell.detectedVal - (0)) * (1/((1)-(0)))) * ((100)-(0)) + (0));
    console.log(a);
    var varA = a;
    if (varA &gt;= 100) {
      varA = 100;
    }
    youtube.setVolume(varA);
  });
});
</code></pre><p>Now, you can change the volume of any YouTube video with a Potentiometer! Webduino Bin: <a href="https://bin.webduino.io/qazu/edit?html,css,js,output">https://bin.webduino.io/qazu/edit?html,css,js,output</a><br>Stack setup: <a href="http://blockly.webduino.io/?lang=en#-KYM6xamvdA--Km37Li4">http://blockly.webduino.io/?lang=en#-KYM6xamvdA--Km37Li4</a></p>  <a class="arrow arrow-r pre-next-button" data-name="pre-next-arrow"></a> <a class="arrow arrow-l pre-next-button" data-name="pre-next-arrow"></a> <div class="pre-next"> <div> <div class="pre"></div> <div class="next"></div> </div> </div> <div class="note-chicken"></div> <div class="others"> <i class="fa fa-times note-close-btn"></i> <h5>More information : </h5> <div class="others-link otehrs-read"> 1. Tutorials : <a href="https://webduino.io/en/tutorials.html" data-name="noteLink">https://webduino.io/tutorials.html</a> <br> 2. Blockly : <a href="https://goo.gl/Y8sRkl" data-name="noteLink">https://goo.gl/Y8sRkl</a> <br> 3. Products : <a href="https://webduino.io/buy.html" target="_blank" data-name="noteLink">https://webduino.io/buy.html <i class="fa fa-share-square-o"></i></a> <br> 4. Store : <a href="http://goo.gl/0Dj9ip" target="_blank" data-name="noteLink">http://goo.gl/0Dj9ip <i class="fa fa-share-square-o"></i></a> </div> </div> </div> <div class="disqus"> <div id="disqus_thread"></div> </div> <footer class="en"> <div class="logo"> <a href="index.html" data-name="layout-footer-logo"><i></i></a> <a href="../index.html" data-name="layout-footer-logo"><i></i></a> </div> <h4>Copyright 2017 | All Rights Reserved. Powered by Webduino</h4> <h4 style="padding-bottom: 20px;">2F-6, No.12, Fuxing 4th Rd., Qianzhen Dist., Kaohsiung City 806, Taiwan (R.O.C.) / 886-7-3388511</h4> </footer> <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-62202920-1', 'auto');
  ga('send', 'pageview');

</script> </body> </html>