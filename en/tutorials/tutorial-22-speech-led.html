<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta http-equiv="pragma" content="no-cache"> <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"> <meta name="author" content="webduino.io"> <meta name="copyright" content="webduino.io"> <meta itemprop="name" content="webduino.io"> <link rel="icon" href="../../img/layout/favicon.ico" type="image/x-icon"> <title>Project Example 22: Voice Activated LEDs :::: Webduino = Web × Arduino</title> <meta name="description" content="Webduino uses the Chrome internet browser to control all sorts of electronic components, so we should be able to use all other functions that Chrome has to offer. In this project example we will use Chrome's Speech API. Using Google's voice recognition, we can easily control an LED light. The same method could be used with a relay, allowing us to control a light bulb, door lock, or house appliances."> <meta itemprop="description" content="Webduino uses the Chrome internet browser to control all sorts of electronic components, so we should be able to use all other functions that Chrome has to offer. In this project example we will use Chrome's Speech API. Using Google's voice recognition, we can easily control an LED light. The same method could be used with a relay, allowing us to control a light bulb, door lock, or house appliances."> <meta property="og:description" content="Webduino uses the Chrome internet browser to control all sorts of electronic components, so we should be able to use all other functions that Chrome has to offer. In this project example we will use Chrome's Speech API. Using Google's voice recognition, we can easily control an LED light. The same method could be used with a relay, allowing us to control a light bulb, door lock, or house appliances."> <meta property="og:title" content="Project Example 22: Voice Activated LEDs"> <meta property="og:url" content="https://webduino.io/tutorials/tutorial-22-speech-led.html"> <meta property="og:image" content="https://webduino.io/img/tutorials/tutorial-22-01s.jpg"> <meta itemprop="image" content="https://webduino.io/img/tutorials/tutorial-22-01s.jpg"> <script src="../../js/lib/jquery.min.js"></script> <script src="../../js/lib/jquery.lazyload.min.js"></script> <script src="../../js/lib/run_prettify.js"></script> <script src="../../js/layout.js"></script> <script src="../../js/tutorials-en.js"></script> <script src="../../js/lib/disqus.js"></script> <link rel="stylesheet" href="../../style/css/lib/tomorrow.css"> <link rel="stylesheet" href="../../style/css/layout.css"> <link rel="stylesheet" href="../../style/css/sub-header.css"> <link rel="stylesheet" href="../../style/css/tutorials-content.css"> <link rel="stylesheet" href="../../style/css/tutorials-en-content.css"> <link rel="stylesheet" href="../../style/css/lib/font-awesome.css"> <style>
.tutorials-content p{
	word-wrap:normal;
	word-break:normal;
}
</style> </head> <body> <header class="path-0"> <a class="logo" href="index.html" data-name="layout-header-logo"></a> <div class="mobile-menu"></div> <div class="menu"> <a href="index.html" class="index" data-name="layout-mobile-menu">Home</a> <a href="tutorials.html" class="tutorials" data-name="layout-mobile-menu">Tutorials</a> <a href="buy.html" class="buy" data-name="layout-mobile-men">Buy</a> <a href="about.html" class="about" data-name="layout-mobile-men">About us</a> <a href="../index.html" class="english" data-name="layout-mobile-men">中文</a> </div> </header> <header class="path-1"> <a class="logo" href="../index.html"></a> <div class="mobile-menu"></div> <div class="menu"> <a href="../index.html" class="index" data-name="layout-menu">Home</a> <a href="../tutorials.html" class="tutorials" data-name="layout-menu">Tutorials</a> <a href="../buy.html" class="buy" data-name="layout-menu">Buy</a> <a href="../about.html" class="about" data-name="layout-menu">About us</a> <a href="../../index.html" class="english" data-name="layout-mobile-men">中文</a> </div> </header> <div class="tutorials-content"> <div class="banner"> </div> <h1>Project Example 22: Voice Activated LEDs</h1> <p>Webduino uses the Chrome internet browser to control all sorts of electronic components, so we should be able to use all other functions that Chrome has to offer. In this project example we will use Chrome&#39;s Speech API. Using Google&#39;s voice recognition, we can easily control an LED light. The same method could be used with a relay, allowing us to control a light bulb, door lock, or house appliances.</p>  <h2>Video Tutorial</h2> <p>Check the video tutorial here: <iframe class="youtube" src="https://www.youtube.com/embed/FXoe5k6_iQo" frameborder="0" allowfullscreen=""></iframe></p> <h2>Wiring and Practice</h2> <p>This tutorial only uses one LED. Remember that LEDs have a longer leg and a shorter leg. The longer leg goes to high potential (pins that have a number) and the shorter leg goes to low potential (GND). So, plug the LED into the correct pins directly on your board or use a breadboard and jumper wires. For this tutorial, <strong>connect the longer leg to 10 and the shorter leg to GND</strong>.</p> <p>Webduino Mark 1 Circuit diagram:</p> <p><img src="../../img/tutorials/tutorial-22-02.jpg"></p> <p>Webduino Fly Circuit diagram:</p> <p><img src="../../img/tutorials/tutorial-22-02-fly.jpg"></p> <p>Reference image:</p> <p><img src="../../img/tutorials/tutorial-22-03.jpg"></p>  <h2>Instructions for using the Webduino Blockly</h2> <p>Open the <a href="https://blockly.webduino.io/?lang=en">Webduino Blocky Editor</a>, and click on the &quot;Web Demo Area&quot; button, click on the drop down menu and choose &quot;Show Text&quot;.</p> <p><img src="../../img/tutorials/en/tutorial-22-04.jpg"></p> <p>Place a &quot;Board&quot; into the workspace, fill in the name of your Webduino board, and place an &quot;LED&quot; block into the stack. Set the name to led and pin to 10.</p> <p><img src="../../img/tutorials/en/tutorial-22-05.jpg"></p> <p>Click on &quot;Voice control&quot; under the &quot;Advanced&quot; menu to find the blocks we need for this example.</p> <p><img src="../../img/tutorials/en/tutorial-22-06.jpg"></p> <p>Place the &quot;Start Recognition&quot; block into the stack. Voice recognition can only work with one language at a time (here we can choose Mandarin or English).</p> <p><img src="../../img/tutorials/en/tutorial-22-07.jpg"></p> <p>The &quot;interimResults&quot; on the &quot;Voice control&quot; block is used to control how we want the voice recognition to read our speech. If it is set to &quot;on&quot; it will recognize every word spoken, and if it is set to &quot;off&quot; it will recognize pauses creating sentences. If you are using a browser on a computer, we recommend setting it to &quot;on&quot;, so you will receive better results. <strong>If you are using a mobile phone, set it to &quot;off&quot;. The speech recognition will only work for phones that run on Android.</strong></p> <p><img src="../../img/tutorials/en/tutorial-22-08.jpg"></p> <p>Next, place a &quot;Show Text&quot; block in the stack with an &quot;Recognized text&quot; block attached, so that the words understood by the voice recognition are shown on the screen.</p> <p><img src="../../img/tutorials/en/tutorial-22-09.jpg"></p> <p>Then place an &quot;if word include / do&quot; block inside the &quot;Recognition&quot; block to program an action. In the example, we make an LED turn on and off when we say &quot;turn on the lights&quot; and &quot;turn off the lights&quot;. Or, if we say &quot;blink&quot; the LED will flash.</p> <p><img src="../../img/tutorials/en/tutorial-22-10.jpg"></p> <p>If you need to create multiple commands, use a &quot;List&quot; block to place commands inside of one action.</p> <p><img src="../../img/tutorials/en/tutorial-22-11.jpg"></p> <p>Check if the board is online (click &quot;<a href="https://webduino.io/device.html">Check Device Status</a>&quot;) and click on the red execution button &quot;Run Blocks&quot;. A popup window will ask if you will allow the microphone to be used, click &quot;Allow&quot;.</p> <p><img src="../../img/tutorials/en/tutorial-22-12.jpg"></p> <p>Then you can start talking and controlling an LED using voice recognition. (Solution: <a href="https://blockly.webduino.io/?lang=en#-KZUKrlUTBEA4YgkibSj">https://blockly.webduino.io/?lang=en#-KZUKrlUTBEA4YgkibSj</a>)</p> <p><img src="../../img/tutorials/en/tutorial-22-13.jpg"></p> <h2>Code Explanation (<a href="http://bin.webduino.io/tazaq/edit?html,js,output">Check Webduino Bin</a>, <a href="https://webduino.io/device.html">Check Device Status</a>)</h2> <p>Include <code>webduino-all.min.js</code> in the header of your html files in order to support all of the Webduino&#39;s components. If the codes are generated by Webduino Blockly, you also have to include <code>webduino-blockly.js</code> in your files.</p> <pre><code>&lt;script src=&quot;https://webduino.io/components/webduino-js/dist/webduino-all.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://webduinoio.github.io/webduino-blockly/webduino-blockly.js&quot;&gt;&lt;/script&gt;
</code></pre><p>There is only a span inside the HTML file used to show the recognized text.</p> <pre><code>&lt;span id=&quot;demo-area-01-show&quot;&gt;123&lt;/span&gt;
</code></pre><p>JavaScript mainly uses <code>webkitSpeechRecognition()</code>, a built-in voice recognition object in Chrome. Depending on different attributes, such as <code>continuous</code>, <code>interimResults</code> and <code>lang</code> we could set up the voice recognition. Voice recognition will return a <code>onresult</code> attribute with the text recognized inside. We can write a piece of code that will perform certain actions when we are saying the correct commands.</p> <pre><code>var led;

boardReady(&#39;&#39;, function (board) {
  board.samplingInterval = 20;
  led = getLed(board, 10);
  function speechRecognition(){
    if (!(&quot;webkitSpeechRecognition&quot; in window)) {
      alert(&quot;This browser doesn&#39;t support speech recognition. Please switch to google chrome. (You must use Chrome browser version 25 or later.)&quot;);
    } else{
      window._recognition = new webkitSpeechRecognition();
      window._recognition.continuous = true;
      window._recognition.interimResults = true;
      window._recognition.lang = &quot;cmn-Hant-TW&quot;;

      window._recognition.onstart = function() {
        console.log(&quot;Start recognize...&quot;);
      };

      window._recognition.onend = function() {
        console.log(&quot;Stop recognize&quot;);
      };

      window._recognition.onresult = function(event,result) {
        result = {};
        result.resultLength = event.results.length-1;
        result.resultTranscript = event.results[result.resultLength][0].transcript;
        if(event.results[result.resultLength].isFinal===false){
          console.log(result.resultTranscript);
            document.getElementById(&quot;demo-area-01-show&quot;).innerHTML = result.resultTranscript;
    if(result.resultTranscript.indexOf(&quot;turn on the lights&quot;)!==-1){
              led.on();
          }
    if(result.resultTranscript.indexOf(&quot;turn off the lights&quot;)!==-1){
              led.off();
          }
    if(result.resultTranscript.indexOf(&quot;blink&quot;)!==-1){
              led.blink(0.5*1000);
          }
                }else if(event.results[result.resultLength].isFinal===true){
          console.log(&quot;final&quot;);
        }
      };
      window._recognition.start();
    }
  }
  speechRecognition();
});
</code></pre><p>Here we have a simple intro to voice recognition and Blockly! Webduino Bin: <a href="http://bin.webduino.io/tazaq/edit?html,js,output">http://bin.webduino.io/tazaq/edit?html,js,output</a><br>Stack setup: <a href="https://blockly.webduino.io/?lang=en#-KZUKrlUTBEA4YgkibSj">https://blockly.webduino.io/?lang=en#-KZUKrlUTBEA4YgkibSj</a></p>  <a class="arrow arrow-r pre-next-button" data-name="pre-next-arrow"></a> <a class="arrow arrow-l pre-next-button" data-name="pre-next-arrow"></a> <div class="pre-next"> <div> <div class="pre"></div> <div class="next"></div> </div> </div> <div class="note-chicken"></div> <div class="others"> <i class="fa fa-times note-close-btn"></i> <h5>More information : </h5> <div class="others-link otehrs-read"> 1. Tutorials : <a href="https://webduino.io/en/tutorials.html" data-name="noteLink">https://webduino.io/tutorials.html</a> <br> 2. Blockly : <a href="https://goo.gl/Y8sRkl" data-name="noteLink">https://goo.gl/Y8sRkl</a> <br> 3. Products : <a href="https://webduino.io/buy.html" target="_blank" data-name="noteLink">https://webduino.io/buy.html <i class="fa fa-share-square-o"></i></a> <br> 4. Store : <a href="http://goo.gl/0Dj9ip" target="_blank" data-name="noteLink">http://goo.gl/0Dj9ip <i class="fa fa-share-square-o"></i></a> </div> </div> </div> <div class="disqus"> <div id="disqus_thread"></div> </div> <footer class="en"> <div class="logo"> <a href="index.html" data-name="layout-footer-logo"><i></i></a> <a href="../index.html" data-name="layout-footer-logo"><i></i></a> </div> <h4>Copyright 2017 | All Rights Reserved. Powered by Webduino</h4> <h4>2F-6, No.12, Fuxing 4th Rd., Qianzhen Dist., Kaohsiung City 806, Taiwan (R.O.C.) / 886-7-3388511</h4> </footer> <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-62202920-1', 'auto');
  ga('send', 'pageview');

</script> </body> </html>