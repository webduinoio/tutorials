<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta http-equiv="pragma" content="no-cache"> <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"> <meta name="author" content="webduino.io"> <meta name="copyright" content="webduino.io"> <meta itemprop="name" content="webduino.io"> <link rel="icon" href="../../img/layout/favicon.ico" type="image/x-icon"> <title>Project Example 7: Controlling LEDs with an Ultrasonic sensor :::: Webduino = Web × Arduino</title> <meta name="description" content="For anyone writing C/C++ on Arduino, controlling an LED with an Ultrasonic sensor would be a no brainer, but connecting it to web? That's another story!If you've followed through the previous tutorials and have a good grasp on how the sensors work, you should be able to manipulate an LED with an Ultrasonic sensor pretty easily. Since everything is connected through the internet, whenever there is an action, the webpage you are interacting with will react such as changing the size of an image. This creates many possibilities for future projects!"> <meta itemprop="description" content="For anyone writing C/C++ on Arduino, controlling an LED with an Ultrasonic sensor would be a no brainer, but connecting it to web? That's another story!If you've followed through the previous tutorials and have a good grasp on how the sensors work, you should be able to manipulate an LED with an Ultrasonic sensor pretty easily. Since everything is connected through the internet, whenever there is an action, the webpage you are interacting with will react such as changing the size of an image. This creates many possibilities for future projects!"> <meta property="og:description" content="For anyone writing C/C++ on Arduino, controlling an LED with an Ultrasonic sensor would be a no brainer, but connecting it to web? That's another story!If you've followed through the previous tutorials and have a good grasp on how the sensors work, you should be able to manipulate an LED with an Ultrasonic sensor pretty easily. Since everything is connected through the internet, whenever there is an action, the webpage you are interacting with will react such as changing the size of an image. This creates many possibilities for future projects!"> <meta property="og:title" content="Project Example 7: Controlling LEDs with an Ultrasonic sensor"> <meta property="og:url" content="https://webduino.io/tutorials/tutorial-07-ultrasonic-led.html"> <meta property="og:image" content="https://webduino.io/img/tutorials/tutorial-07-01s.jpg"> <meta itemprop="image" content="https://webduino.io/img/tutorials/tutorial-07-01s.jpg"> <script src="../../js/lib/jquery.min.js"></script> <script src="../../js/lib/jquery.lazyload.min.js"></script> <script src="../../js/lib/run_prettify.js"></script> <script src="../../js/layout.js"></script> <script src="../../js/tutorials-en.js"></script> <script src="../../js/lib/disqus.js"></script> <link rel="stylesheet" href="../../style/css/lib/tomorrow.css"> <link rel="stylesheet" href="../../style/css/layout.css"> <link rel="stylesheet" href="../../style/css/sub-header.css"> <link rel="stylesheet" href="../../style/css/tutorials-content.css"> <link rel="stylesheet" href="../../style/css/tutorials-en-content.css"> <link rel="stylesheet" href="../../style/css/lib/font-awesome.css"> <style>
.tutorials-content p{
	word-wrap:normal;
	word-break:normal;
}
</style> </head> <body> <header class="path-0"> <a class="logo" href="index.html" data-name="layout-header-logo"></a> <div class="mobile-menu"></div> <div class="menu"> <a href="index.html" class="index" data-name="layout-mobile-menu">Home</a> <a href="tutorials.html" class="tutorials" data-name="layout-mobile-menu">Tutorials</a> <a href="buy.html" class="buy" data-name="layout-mobile-men">Buy</a> <a href="about.html" class="about" data-name="layout-mobile-men">About us</a> <a href="../index.html" class="english" data-name="layout-mobile-men">中文</a> </div> </header> <header class="path-1"> <a class="logo" href="../index.html"></a> <div class="mobile-menu"></div> <div class="menu"> <a href="../index.html" class="index" data-name="layout-menu">Home</a> <a href="../tutorials.html" class="tutorials" data-name="layout-menu">Tutorials</a> <a href="../buy.html" class="buy" data-name="layout-menu">Buy</a> <a href="../about.html" class="about" data-name="layout-menu">About us</a> <a href="../../index.html" class="english" data-name="layout-mobile-men">中文</a> </div> </header> <div class="tutorials-content"> <div class="banner"> </div> <p>#Project Example 7: Controlling LEDs with an Ultrasonic sensor</p> <p>For anyone writing C/C++ on Arduino, controlling an LED with an Ultrasonic sensor would be a no brainer, but connecting it to web? That&#39;s another story!</p> <p>If you&#39;ve followed through the previous tutorials and have a good grasp on how the sensors work, you should be able to manipulate an LED with an Ultrasonic sensor pretty easily. Since everything is connected through the internet, whenever there is an action, the webpage you are interacting with will react such as changing the size of an image. This creates many possibilities for future projects!</p>  <h2 id="video-tutorial">Video Tutorial</h2> <p>Check the video tutorial here:</p> <iframe class="youtube" src="https://www.youtube.com/embed/pRMjbzPXWvw" frameborder="0" allowfullscreen=""></iframe> <h2 id="wiring-and-practice">Wiring and Practice</h2> <p>We will be using the GND pin for both the Ultrasonic sensor and an LED, so grab a breadboard and some wires! Connect the VCC pin from the Ultrasonic sensor to 3.3v, Trig to 11, Echo to 10, GND to GND. Take another wire and connect the long leg of the LED to pin 9 and the short leg to GND. (Be very careful with this step and check your pins, since your Ultrasonic sensor may look different from the schematic shown here.)</p> <p>Webduino Mark 1 Circuit diagram:</p> <p><img src="../../img/tutorials/en/tutorial-07-02-new.jpg"></p> <p>Webduino Fly Circuit diagram:</p> <p><img src="../../img/tutorials/en/tutorial-07-02-fly.jpg"></p> <p>Reference image:</p> <p><img src="../../img/tutorials/tutorial-07-03.jpg"></p> <p><img src="../../img/tutorials/tutorial-07-04.jpg"></p>  <h2 id="instructions-for-using-the-webduino-blockly">Instructions for using the Webduino Blockly</h2> <p>We will be using &quot;Click Bulb&quot;, so that when the LED on the webpage lights up the actual LED will also light up. Open the <a href="https://blockly.webduino.io/?lang=en">Webduino Blockly editor</a> and click the &quot;Web Demo Area&quot; button on the top-right, then choose &quot;Click Bulb&quot; from the drop-down menu and you will see an image of a light bulb. We will be manipulating this photo with the distance measured from the Ultrasonic sensor.</p> <p><img src="../../img/tutorials/en/tutorial-07-05.jpg"></p> <p>Place a &quot;Board&quot; block into the workspace, and select you Webduino board&#39;s name. Place a &quot;Set Ultrasonic&quot; block into the stack and set the name to ultrasonic, set Trig to 11 and Echo to 10. Then place a &quot;Set LED&quot; block under that, and set it to &quot;led&quot; and pin to 9.</p> <p><img src="../../img/tutorials/en/tutorial-07-06.jpg"></p> <p>Add an &quot;Ultrasonic get distance&quot; block to calculate the distance every 500 ms (milliseconds). Now add the &quot;If do&quot; &quot;Logic&quot; block and set it to &quot;If do, else&quot;. Attach a &quot;Logic&quot; equation block to that and put in an &quot;Ultrasonic&#39;s distance&quot; block and a number block set to 15. Make sure to set the logic equation to &quot;Less than&quot;. Last, add &quot;LED set state&quot; blocks and &quot;Set bulb&#39;s state&quot; blocks to the &quot;Do&quot; and &quot;Else&quot; sections of the logic block. Set each block to &quot;On&quot; and &quot;Off&quot; respectively. This will make it so that when the distance measured is less than 15 cm the LED will light up, as will the light bulb photo on the screen.</p> <p><img src="../../img/tutorials/en/tutorial-07-07.jpg"></p> <p>After you&#39;re done building the stack make sure the board is online (click &quot;<a href="https://webduino.io/device.html">Check Device Status</a>&quot;), then click on the red execute button &quot;Run Blocks&quot;, wave your hands in front of the Ultrasonic sensor and you&#39;ll see the LED light up! Solution: <a href="https://blockly.webduino.io/?lang=en#-KYIQsWOluLmCzc7Mr7Q">https://blockly.webduino.io/?lang=en#-KYIQsWOluLmCzc7Mr7Q</a> </p> <h2 id="code-explanation-check-webduino-bin-check-device-status-">Code Explanation (<a href="http://bin.webduino.io/jezuh/edit?html,css,js,output">Check Webduino Bin</a>, <a href="https://webduino.io/device.html">Check Device Status</a>)</h2> <p>Include <code>webduino-all.min.js</code> in the header of your html files in order to support all of the Webduino&#39;s components. If the codes are generated by Webduino Blockly, you also have to include <code>webduino-blockly.js</code> in your files.</p> <pre><code>&lt;script src=&quot;https://webduino.io/components/webduino-js/dist/webduino-all.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://webduinoio.github.io/webduino-blockly/webduino-blockly.js&quot;&gt;&lt;/script&gt;
</code></pre><p>Inside the HTML code you will find two light bulb images, one on and one off, we will control them with CSS. </p> <pre><code>&lt;div id=&quot;demo-area-02-light&quot; class=&quot;off&quot;&gt;
  &lt;img src=&quot;https://blockly.webduino.io/media/off.png&quot; id=&quot;demo-area-02-off&quot;&gt;
  &lt;img src=&quot;https://blockly.webduino.io/media/on.png&quot; id=&quot;demo-area-02-on&quot;&gt;
&lt;/div&gt;
</code></pre><p>CSS sets the light bulb to light up when we set on, and vice versa.</p> <pre><code>#demo-area-02-light img {
  height: 200px;
  display: none;
}

#demo-area-02-light.on #demo-area-02-on {
  display: inline-block;
}

#demo-area-02-light.off #demo-area-02-off {
  display: inline-block;
}
</code></pre><p>With JavaScript we have an <code>if-else</code> statement inside the main function <code>ping</code>, which sets <code>led.on()</code> when &lt; 15.</p> <pre><code>var ultrasonic;
var led;

boardReady(&#39;&#39;, function (board) {
  board.samplingInterval = 20;
  ultrasonic = getUltrasonic(board, 11, 10);
  led = getLed(board, 9);
  ultrasonic.ping(function(cm){
    console.log(ultrasonic.distance);
    if (ultrasonic.distance &lt; 15) {
      led.on();
      document.getElementById(&quot;demo-area-02-light&quot;).className = &quot;on&quot;;
    } else {
      led.off();
      document.getElementById(&quot;demo-area-02-light&quot;).className = &quot;off&quot;;
    }
  }, 500);
});
</code></pre><p>There you have it, using Ultrasonic sensor to control LEDs to light up when a certain distance is sensed.<br>Webduino Bin: <a href="http://bin.webduino.io/suyey/edit?html,css,js,output">http://bin.webduino.io/suyey/edit?html,css,js,output</a><br>Stack setup: <a href="https://blockly.webduino.io/?lang=en#-KYITizP-S9nNVnCOudj">https://blockly.webduino.io/?lang=en#-KYITizP-S9nNVnCOudj</a></p>  <a class="arrow arrow-r pre-next-button" data-name="pre-next-arrow"></a> <a class="arrow arrow-l pre-next-button" data-name="pre-next-arrow"></a> <div class="pre-next"> <div> <div class="pre"></div> <div class="next"></div> </div> </div> <div class="note-chicken"></div> <div class="others"> <i class="fa fa-times note-close-btn"></i> <h5>More information : </h5> <div class="others-link otehrs-read"> 1. Tutorials : <a href="https://webduino.io/en/tutorials.html" data-name="noteLink">https://webduino.io/tutorials.html</a> <br> 2. Blockly : <a href="https://goo.gl/Y8sRkl" data-name="noteLink">https://goo.gl/Y8sRkl</a> <br> 3. Products : <a href="https://webduino.io/buy.html" target="_blank" data-name="noteLink">https://webduino.io/buy.html <i class="fa fa-share-square-o"></i></a> <br> 4. Store : <a href="http://goo.gl/0Dj9ip" target="_blank" data-name="noteLink">http://goo.gl/0Dj9ip <i class="fa fa-share-square-o"></i></a> </div> </div> </div> <div class="disqus"> <div id="disqus_thread"></div> </div> <footer class="en"> <div class="logo"> <a href="index.html" data-name="layout-footer-logo"><i></i></a> <a href="../index.html" data-name="layout-footer-logo"><i></i></a> </div> <h4>Copyright 2017 | All Rights Reserved. Powered by Webduino</h4> <h4 style="padding-bottom: 20px;">2F-6, No.12, Fuxing 4th Rd., Qianzhen Dist., Kaohsiung City 806, Taiwan (R.O.C.) / 886-7-3388511</h4> </footer> <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-62202920-1', 'auto');
  ga('send', 'pageview');

</script> </body> </html>