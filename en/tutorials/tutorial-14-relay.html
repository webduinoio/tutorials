<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta http-equiv="pragma" content="no-cache"> <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"> <meta name="author" content="webduino.io"> <meta name="copyright" content="webduino.io"> <meta itemprop="name" content="webduino.io"> <link rel="icon" href="../../img/layout/favicon.ico" type="image/x-icon"> <title>Project Example 14: Using a Relay to control a fan :::: Webduino = Web × Arduino</title> <meta name="description" content="A relay is an electronic device commonly seen in automated systems. It uses a current or signal to open or close another circuit. They are used in circuits for voltage balancing, preventing equipment damage, and as switches. When we use a relay with the Webduino, we can easily make a smart electric socket or an automatic switch."> <meta itemprop="description" content="A relay is an electronic device commonly seen in automated systems. It uses a current or signal to open or close another circuit. They are used in circuits for voltage balancing, preventing equipment damage, and as switches. When we use a relay with the Webduino, we can easily make a smart electric socket or an automatic switch."> <meta property="og:description" content="A relay is an electronic device commonly seen in automated systems. It uses a current or signal to open or close another circuit. They are used in circuits for voltage balancing, preventing equipment damage, and as switches. When we use a relay with the Webduino, we can easily make a smart electric socket or an automatic switch."> <meta property="og:title" content="Project Example 14: Using a Relay to control a fan"> <meta property="og:url" content="https://webduino.io/tutorials/tutorial-14-relay.html"> <meta property="og:image" content="https://webduino.io/img/tutorials/tutorial-14-01s.jpg"> <meta itemprop="image" content="https://webduino.io/img/tutorials/tutorial-14-01s.jpg"> <script src="../../js/lib/jquery.min.js"></script> <script src="../../js/lib/jquery.lazyload.min.js"></script> <script src="../../js/lib/run_prettify.js"></script> <script src="../../js/layout.js"></script> <script src="../../js/tutorials-en.js"></script> <script src="../../js/lib/disqus.js"></script> <link rel="stylesheet" href="../../style/css/lib/tomorrow.css"> <link rel="stylesheet" href="../../style/css/layout.css"> <link rel="stylesheet" href="../../style/css/sub-header.css"> <link rel="stylesheet" href="../../style/css/tutorials-content.css"> <link rel="stylesheet" href="../../style/css/tutorials-en-content.css"> <link rel="stylesheet" href="../../style/css/lib/font-awesome.css"> <style>
.tutorials-content p{
	word-wrap:normal;
	word-break:normal;
}
</style> </head> <body> <header class="path-0"> <a class="logo" href="index.html" data-name="layout-header-logo"></a> <div class="mobile-menu"></div> <div class="menu"> <a href="index.html" class="index" data-name="layout-mobile-menu">Home</a> <a href="tutorials.html" class="tutorials" data-name="layout-mobile-menu">Tutorials</a> <a href="buy.html" class="buy" data-name="layout-mobile-men">Buy</a> <a href="about.html" class="about" data-name="layout-mobile-men">About us</a> <a href="../index.html" class="english" data-name="layout-mobile-men">中文</a> </div> </header> <header class="path-1"> <a class="logo" href="../index.html"></a> <div class="mobile-menu"></div> <div class="menu"> <a href="../index.html" class="index" data-name="layout-menu">Home</a> <a href="../tutorials.html" class="tutorials" data-name="layout-menu">Tutorials</a> <a href="../buy.html" class="buy" data-name="layout-menu">Buy</a> <a href="../about.html" class="about" data-name="layout-menu">About us</a> <a href="../../index.html" class="english" data-name="layout-mobile-men">中文</a> </div> </header> <div class="tutorials-content"> <div class="banner"> </div> <h1>Project Example 14: Using a Relay to control a fan</h1> <p>A relay is an electronic device commonly seen in automated systems. It uses a current or signal to open or close another circuit. They are used in circuits for voltage balancing, preventing equipment damage, and as switches. When we use a relay with the Webduino, we can easily make a smart electric socket or an automatic switch.</p>  <h2>Video Tutorial</h2> <p>Check the video tutorial here: <iframe class="youtube" src="https://www.youtube.com/embed/Z3x_qW7fXzM" frameborder="0" allowfullscreen=""></iframe></p> <h2>Wiring and Practice</h2> <p>Before we start to build anything, let&#39;s take a look at what a relay is. Inside a relay there is an electromagnet. When a relay is activated, the NO (Normally Open) contact connects to the COM (Common Connection) contact, and the circuit is connected; the circuit is disconnected when the relay is inactive.</p> <p>When a relay is activated, the NC (Normally Closed) contact disconnects the circuit; the circuit is connected when the relay is inactive. Through this system, we can easily turn on/off an electric device.</p> <p><img src="../../img/tutorials/tutorial-14-02.jpg"></p> <p><img src="../../img/tutorials/en/tutorial-14-03.jpg"></p> <p>Because we are using a low-power signal to control another circuit, we need to use two separate power outputs, one for our Webduino board and, the other for the relay. On one side of the relay we have 3 pins, connect VCC to 3.3V on the Webduino board, GND to GND, and IN to pin 9. The other side of the relay will require a screwdriver to connect the wires (normally this side is connected to electric devices with a higher current), we will connect one wire from the fan to the NO contact on the Relay and the other wire to the power output. Last, connect the power for the fan to the COM contact.</p> <p>Webduino Mark 1 Circuit diagram:</p> <p><img src="../../img/tutorials/tutorial-14-04.jpg"></p> <p>Webduino Fly Circuit diagram:</p> <p><img src="../../img/tutorials/tutorial-14-04-fly.jpg"></p> <p>Use a screwdriver to screw in the wires securely.</p> <p><img src="../../img/tutorials/tutorial-14-05.jpg"></p> <p><img src="../../img/tutorials/tutorial-14-08.jpg"></p> <p>Reference image:</p> <p><img src="../../img/tutorials/tutorial-14-06.jpg"></p> <p>The relay will turn on a red light when it is inactivated, and will turn on a green light when it is activated.</p> <p><img src="../../img/tutorials/tutorial-14-07.jpg"></p>  <h2>Instructions for using the Webduino Blockly</h2> <p>Open the <a href="https://blockly.webduino.io/?lang=en">Webduino Blocky editor</a> and click on the &quot;Web Demo Area&quot; button. We will be using &quot;Click Bulb&quot; to control the relay, so, choose &quot;Click Bulb&quot; from the drop down menu.</p> <p><img src="../../img/tutorials/en/tutorial-14-09.jpg"></p> <p>Place a &quot;Board&quot; block onto the workspace, fill in the name of your Webduino board and place a &quot;Set relay to&quot; block into the stack. Set the name to relay and the pin to 9.</p> <p><img src="../../img/tutorials/en/tutorial-14-10.jpg"></p> <p>Next, place a &quot;Click bulb / do&quot; block in the stack and a &quot;if / do&quot; block inside of that. So when the light bulb is on, there is a command given. And if the light bulb is off, there is another command.</p> <p><img src="../../img/tutorials/en/tutorial-14-11.jpg"></p> <p>Set up a logic equation so that if the light bulb is on and you click the image, the relay switches and the image of the light bulb turns off, and vise versa.</p> <p><img src="../../img/tutorials/en/tutorial-14-12.jpg"></p> <p>After finishing all of the above, check if the board is online (click &quot;<a href="https://webduino.io/device.html">Check Device Status</a>&quot;) and click on the red execution button &quot;Run Blocks&quot;. Then you can use the light bulb image on the screen to control the relay and in turn, the fan. Solution: <a href="https://blockly.webduino.io/?lang=en#-KZeIYu4eufJ_GjB9J2C">https://blockly.webduino.io/?lang=en#-KZeIYu4eufJ_GjB9J2C</a></p> <h2>Code Explanation (<a href="http://bin.webduino.io/lukoh/edit?html,css,js,output">Check Webduino Bin</a>, <a href="https://webduino.io/device.html">Check Device Status</a>)</h2> <p>Include <code>webduino-all.min.js</code> in the header of your html files in order to support all of the Webduino&#39;s components. If the codes are generated by Webduino Blockly, you also have to include <code>webduino-blockly.js</code> in your files.</p> <pre><code>&lt;script src=&quot;https://webduino.io/components/webduino-js/dist/webduino-all.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://webduinoio.github.io/webduino-blockly/webduino-blockly.js&quot;&gt;&lt;/script&gt;
</code></pre><p>Inside the body of the HTML file, where there is an image section with the ID, demo-area-o2-light, there is a part where there are two different light bulb images, one on and one off, so when we click on the images they will change from one state to another.</p> <pre><code>&lt;div id=&quot;demo-area-02-light&quot; class=&quot;off&quot;&gt;
  &lt;img src=&quot;https://blockly.webduino.io/media/off.png&quot; id=&quot;demo-area-02-off&quot;&gt;
  &lt;img src=&quot;https://blockly.webduino.io/media/on.png&quot; id=&quot;demo-area-02-on&quot;&gt;
&lt;/div&gt;
</code></pre><p>We use CSS to control the light bulb image, here we use display:none; to control the changing of images, below is the CSS code.</p> <pre><code>#demo-area-02-light img{
  height:200px;
  display:none;
}
#demo-area-02-light.on #demo-area-02-on{
  display:inline-block;
}
#demo-area-02-light.off #demo-area-02-off{
  display:inline-block;
}
</code></pre><p>We can see in the JavaScript code that a relay is similar to an LED because it uses &quot;on&quot; and &quot;off&quot; for control. The light bulb image uses <code>className</code> as a switch.</p> <pre><code>var relay;

boardReady(&#39;&#39;, function (board) {
  board.samplingInterval = 20;
  relay = getRelay(board, 9);
  document.getElementById(&quot;demo-area-02-light&quot;).addEventListener(&quot;click&quot;,function(){
    if (document.getElementById(&quot;demo-area-02-light&quot;).className == &quot;on&quot;) {
      document.getElementById(&quot;demo-area-02-light&quot;).className = &quot;off&quot;;
      relay.off();
    } else {
      document.getElementById(&quot;demo-area-02-light&quot;).className = &quot;on&quot;;
      relay.on();
    }
  });
});
</code></pre><p>And that&#39;s how you use a relay to control a fan! Webduino Bin: <a href="http://bin.webduino.io/lukoh/edit?html,css,js,output">http://bin.webduino.io/lukoh/edit?html,css,js,output</a><br>Stack setup: <a href="https://blockly.webduino.io/?lang=en#-KZeJOn7Z9s96DYU8jyn">https://blockly.webduino.io/?lang=en#-KZeJOn7Z9s96DYU8jyn</a></p>  <a class="arrow arrow-r pre-next-button" data-name="pre-next-arrow"></a> <a class="arrow arrow-l pre-next-button" data-name="pre-next-arrow"></a> <div class="pre-next"> <div> <div class="pre"></div> <div class="next"></div> </div> </div> <div class="note-chicken"></div> <div class="others"> <i class="fa fa-times note-close-btn"></i> <h5>More information : </h5> <div class="others-link otehrs-read"> 1. Tutorials : <a href="https://webduino.io/en/tutorials.html" data-name="noteLink">https://webduino.io/tutorials.html</a> <br> 2. Blockly : <a href="https://goo.gl/Y8sRkl" data-name="noteLink">https://goo.gl/Y8sRkl</a> <br> 3. Products : <a href="https://webduino.io/buy.html" target="_blank" data-name="noteLink">https://webduino.io/buy.html <i class="fa fa-share-square-o"></i></a> <br> 4. Store : <a href="http://goo.gl/0Dj9ip" target="_blank" data-name="noteLink">http://goo.gl/0Dj9ip <i class="fa fa-share-square-o"></i></a> </div> </div> </div> <div class="disqus"> <div id="disqus_thread"></div> </div> <footer> <div class="logo"> <a href="index.html" data-name="layout-footer-logo"><i></i></a> <a href="../index.html" data-name="layout-footer-logo"><i></i></a> </div> <h4>Copyright 2017 | All Rights Reserved. Powered by Webduino</h4> <h4>2F-6, No.12, Fuxing 4th Rd., Qianzhen Dist., Kaohsiung City 806, Taiwan (R.O.C.) / 886-7-3388511</h4> </footer> <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-62202920-1', 'auto');
  ga('send', 'pageview');

</script> </body> </html>